<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Test Autofill LifeBook â€“ Questions & RÃ©ponses</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script type="module">
    window.addEventListener("DOMContentLoaded", () => {
      const questions = [
        "Quel est votre prÃ©nom ?",
        "Câ€™est un trÃ¨s beau prÃ©nom. Pourriez-vous mâ€™en dire plus sur son origine ou la raison de ce choix ?",
        "OÃ¹ avez-vous grandi et que pouvez-vous me dire sur cet endroit ? Comment ce lieu a-t-il influencÃ© votre enfance ?",
        "Quel Ã©tait votre jeu ou activitÃ© prÃ©fÃ©rÃ© durant votre enfance ?",
        "Parlez-moi un peu de vos parents : mÃ©tiers, personnalitÃ©s, anecdotes, influence sur votre vie ?",
        "Et vos frÃ¨res et sÅ“urs, si vous en avez ?",
        "Quel type dâ€™enfant Ã©tiez-vous et quels Ã©taient vos rÃªves ?",
        "Souvenirs marquants de votre jeune scolaritÃ© ?",
        "Vos amis dâ€™enfance et premiers amours ?",
        "Un voyage marquant durant votre enfance ?",
        "Un Ã©vÃ©nement historique ou changement sociÃ©tal qui vous a marquÃ© Ã©tant enfant ?",
        "Comment dÃ©cririez-vous vos annÃ©es de collÃ¨ge (11â€“14 ans) ?",
        "Anecdotes marquantes de votre adolescence ?",
        "Comment Ã©tiez-vous ado (qualitÃ©s, dÃ©fauts, rÃªves, peurs) ?",
        "Une histoire dâ€™amour marquante Ã  cette Ã©poque ?",
        "Vos hobbies ou passions dâ€™adolescence ?",
        "Votre pÃ©riode au lycÃ©e (15â€“18 ans) ?",
        "Vos ambitions Ã  cette Ã©poque ?",
        "Vos relations familiales ont-elles Ã©voluÃ© entre 15 et 18 ans ?",
        "Anecdotes marquantes (voyages, mÃ©saventures, etc.) ?",
        "DÃ©cisions prises Ã  18 ans pour votre avenir ?",
        "Moment oÃ¹ vous avez quittÃ© le cocon familial ?",
        "DifficultÃ©s entre 18 et 25 ans (Ã©tudes, travail, amour...) ?",
        "Moments heureux marquants de cette pÃ©riode ?",
        "Influence de cette pÃ©riode sur qui vous Ãªtes ?",
        "Parcours professionnel : dÃ©fis et succÃ¨s ?",
        "Comment analysez-vous vos relations amoureuses de jeunesse ?",
        "Comment dÃ©cririez-vous la personne que vous Ãªtes aujourdâ€™hui ?",
        "Tournants majeurs entre 25 et 40 ans ?",
        "Vie professionnelle durant cette pÃ©riode ?",
        "Ã‰volution de votre vie personnelle / relations ?",
        "Avez-vous fondÃ© une famille ?",
        "Ã‰quilibre vie pro / perso ?",
        "Voyages ou aventures significatives ?",
        "Moments de rÃ©alisation ou dÃ©veloppement personnel ?",
        "Changement de valeurs ou perspectives ?",
        "Nouveaux hobbies ou passions ?",
        "Moments les plus heureux ?",
        "LeÃ§ons de vie Ã  partager ?",
        "Ã‰volution de votre carriÃ¨re et ambitions ?",
        "Avez-vous eu des mentors ?",
        "Votre vision de lâ€™avenir Ã  lâ€™Ã©poque ?",
        "Partenaire / enfants : impact sur votre vie ?",
        "Vision actuelle de la vie vs Ã  25 ans ?",
        "Ã‰vÃ©nements inattendus qui ont changÃ© votre perspective ?",
        "Conseils Ã  quelquâ€™un qui entre dans cette pÃ©riode ?",
        "RÃªves rÃ©alisÃ©s ou modifiÃ©s ?",
        "Comment cette pÃ©riode vous a forgÃ© ?",
        "DÃ©but de vos 40 ans : changements ?",
        "CarriÃ¨re Ã  cette pÃ©riode ?",
        "Ã‰volution des relations familiales / amicales ?",
        "Changements personnels (mariage, divorce, enfants partis...) ?",
        "Transitions importantes (soutien aux parents, syndrome du nid vide...) ?",
        "Nouveaux loisirs ou passions aprÃ¨s 40 ans ?",
        "Ã‰volution santÃ© et bien-Ãªtre ?",
        "RÃ©alisations marquantes ?",
        "Changement de perspectives / valeurs ?",
        "Choix audacieux ou risques pris ?",
        "PrÃ©paration retraite ou avenir ?",
        "Moments de rÃ©flexion importants ?",
        "Ã‰quilibre travail / famille / loisirs ?",
        "Engagements sociaux ou bÃ©nÃ©voles ?",
        "Votre vision de lâ€™avenir aujourdâ€™hui ?",
        "Conseils Ã  ceux qui entrent dans la quarantaine ?",
        "LeÃ§ons apprises entre 40 et 60 ans ?",
        "Objectifs aprÃ¨s 60 ans ?",
        "Gestion des dÃ©fis liÃ©s Ã  lâ€™Ã¢ge ?",
        "Bilan de cette pÃ©riode ?",
        "Passage Ã  la retraite ?",
        "Changements aprÃ¨s 60 ans ?",
        "Comment occupez-vous vos journÃ©es ?",
        "Nouvelles passions ou anciens intÃ©rÃªts retrouvÃ©s ?",
        "Ã‰volution des relations Ã  ce stade ?",
        "Voyages aprÃ¨s 60 ans ?",
        "Gestion des changements physiques ?",
        "Engagement social ou bÃ©nÃ©vole ?",
        "Changement de valeurs aprÃ¨s 60 ans ?",
        "LeÃ§ons de vie spÃ©cifiques Ã  cette pÃ©riode ?",
        "Vision de votre hÃ©ritage ?",
        "Objectifs ou rÃªves encore Ã  vivre ?",
        "RÃ©flexion sur succession et fin de vie ?",
        "Connexion avec les autres Ã  ce stade ?",
        "Adaptation pour rester actif ?",
        "RÃ©flexion sur la place des personnes Ã¢gÃ©es ?",
        "Gestion des pertes ou changements sociaux ?",
        "Gratitude : pour quoi Ãªtes-vous le plus reconnaissant ?",
        "ActivitÃ©s crÃ©atives ou artistiques ?",
        "Les souvenirs que vous chÃ©rissez le plus ?"
      ];

      const reponses = questions.map((q, i) => `Voici une rÃ©ponse riche, personnelle et rÃ©aliste Ã  la question : Â« ${q} Â»`);

      const historique = questions.map((q, i) => ({
        role: 'user',
        question: q,
        content: reponses[i]
      }));

      const messagesDiv = document.getElementById("messages");
      const afficher = (auteur, texte, classe) => {
        const msg = document.createElement("div");
        msg.className = "message " + classe;
        msg.innerHTML = `<strong>${auteur} :</strong> ${texte}`;
        messagesDiv.appendChild(msg);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
      };

      historique.forEach((msg, i) => {
        afficher("LifeBook", `<strong>${questions[i]}</strong>`, "bot");
        afficher("Vous", msg.content, "user");
      });

      const progression = document.createElement("div");
      progression.id = "progression";
      progression.style.marginTop = "20px";
      progression.innerText = `Question ${historique.length} / 89`;
      messagesDiv.parentNode.insertBefore(progression, messagesDiv.nextSibling);

      const boutonGen = document.createElement("button");
      boutonGen.textContent = "ðŸ“„ GÃ©nÃ©rer le livre PDF";
      boutonGen.style.display = "block";
      boutonGen.style.margin = "30px auto";
      boutonGen.style.padding = "10px 20px";
      boutonGen.style.fontSize = "1em";
      boutonGen.style.background = "#a347ba";
      boutonGen.style.color = "white";
      boutonGen.style.border = "none";
      boutonGen.style.borderRadius = "8px";
      boutonGen.style.cursor = "pointer";

      boutonGen.addEventListener("click", () => {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        let y = 20;

        historique.forEach((item, index) => {
          const question = `${index + 1}. ${item.question}`;
          const reponse = `RÃ©ponse : ${item.content}`;
          const block = `${question}\n${reponse}\n`;
          const lines = doc.splitTextToSize(block, 180);
          if (y + lines.length * 10 > 280) {
            doc.addPage();
            y = 20;
          }
          doc.text(lines, 15, y);
          y += lines.length * 10;
        });

        doc.save("LifeBook_Test.pdf");
      });

      document.body.appendChild(boutonGen);
    });
  </script>
  <style>
    #messages { max-width: 800px; margin: 30px auto; font-family: sans-serif; }
    .message { background: #f5f5f5; border-radius: 8px; padding: 10px; margin-bottom: 8px; }
    .user { background: #d2f8d2; text-align: right; }
    .bot { background: #e8d6f8; text-align: left; }
  </style>
</head>
<body>
  <h1 style="text-align:center">ðŸ“˜ Simulation LifeBook â€“ Questions & RÃ©ponses</h1>
  <div id="messages"></div>
</body>
</html>
